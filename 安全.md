## 😊 安全问题

### XSS攻击

#### 基于反射XSS攻击

1. 攻击者构造出特殊的URL，其中包含恶意代码。
2. 用户打开带有恶意代码的URL时，网站服务端将恶意代码从URL中取出，拼接在html中。
3. 用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行
#### 基于存储XSS攻击

1. 攻击者将恶意代码提交到目标网站的数据库中。
2. 数据拼接在HTML中返回给浏览器。
3. 用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。

#### 解决办法

1. 输入的内容需要做过滤或者转译
2. 使用CSP（Content-Security-Policy）,静止内联JS代码的执行，指定白名单的js执行。CSP也可以用来限制其他静态资源。
### CSRF攻击

用户登录后，服务端下发cookie。第三方站点添加了一个图片，图片的连接是一个请求。请求会自动携带cookie的信息。

#### 解决办法

1. 设置SameSite属性，禁止第三方站点访问cookie
    - Strict，完全禁止第三方cookie
    - Lax，只会在a标签的连接，预加载，GET表单携带cookie
    - None，对cookie不限制，但是必须设置Secure属性（cookie只能通过https协议发送）否则无效。
2. 后端验证请求的http referer。
3. 使用token替代cookie。

### cookie和token都存放在header中，为什么不会劫持token?

CSRF攻击的原因是浏览器会自动带上cookie，而浏览器不会自动带上 token