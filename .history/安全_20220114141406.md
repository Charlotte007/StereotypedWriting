## bilibili 存在关于 http 所有攻击的可能性视频 （全部是利用http的特性制造的攻击方式）

### 三次握手









### 😊 了解DDOS攻击吗（美团一面题）

DDOS攻击，它在短时间内发起大量请求，耗尽服务器的资源，无法响应正常的访问，造成网站实质下线。DDOS攻击是一个大类，有几十种类型。
#### cc攻击

cc攻击，它就是简单粗暴地送来大量正常的请求，超出服务器的最大承受量，导致宕机。
### 😊 了解SYN攻击吗（美团一面题）

在三次握手过程中，服务器发送SYN-ACK之后，收到客户端的ACK之前的TCP连接称为半连接（第二次握手之后，第三次握手之前）

SYN攻击就是, 在短时间内伪造大量不存在的IP地址，向服务器不断地发送SYN包（发送第一次握手），服务器回复确认包（发送第二次握手），并等待客户的确认，由于源地址是不存在的，服务器需要不断的重发ACK的确认包直至超时。这些伪造的SYN包将长时间占用未连接队列，使系统运行缓慢，严重者引起网络堵塞甚至系统瘫痪。

> TCP连接有一个重传机制。在发送报文后，设定一个定时器，每间隔一段时间，没有收到对方的ACK确认应答报文，就会重发该报文。
### 防御DDOS攻击

1. web服务器的防火墙，拦截IP地址
2. cdn, 用户只允许访问cdn的缓存服务器（但是只能用于以静态资源为主的网站，如果存在大量ajax请求不行）
3. 宽带扩容

### XSS攻击 跨站`脚本`攻击

#### 基于反射XSS攻击

1. 攻击者构造出特殊的URL，其中包含恶意代码。
2. 用户打开带有恶意代码的URL时，网站服务端将恶意代码从URL中取出，拼接在html中。
3. 用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行
#### 基于存储XSS攻击

1. 攻击者将恶意代码提交到目标网站的数据库中。
2. 数据拼接在HTML中返回给浏览器。
3. 用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。

#### 解决办法

1. 输入的内容需要做过滤或者转译
2. 使用CSP（Content-Security-Policy）,静止内联JS代码的执行，指定白名单的js执行。CSP也可以用来限制其他静态资源。
### CSRF/XSRF攻击(Cross-site request forgery) 跨站`请求伪造`

用户登录后，服务端下发cookie。第三方站点添加了一个图片，图片的连接是一个请求。请求会自动携带cookie的信息。
- 同一个浏览器，不同Tab栏， 登录A（攻击目标），再访问 B（危险网站），B（危险网站）请求A（攻击目标）的接口，会获取到A站的有效cookie信息，绕过权限验证，成功请求到A站的接口

#### 解决办法

1. 设置SameSite属性，禁止第三方站点访问cookie (`SameSite:用来防止 CSRF 攻击和用户追踪。`)
    - Strict，完全禁止第三方cookie
    - Lax，只会在a标签的连接，预加载，GET表单携带cookie
    - None，对cookie不限制，但是必须设置Secure属性（cookie只能通过https协议发送）否则无效。 
      - `Secure` /sɪˈkjʊə(r)/ : cookie的属性之一，`true` —— 只能在HTTPS连接中传输，HTTP连接不会传输，所以不会被窃取到Cookie的具体内容， `false` —— HTTP、HTTPS连接都可以传输

2. 后端验证请求的http referer。(`一般会带上Referer，告诉服务器该网页是从哪个页面链接过来的，服务器因此可以获得一些信息用于处理。`)
3. 使用token替代cookie。

### cookie和token都存放在header中，为什么不会劫持token?

CSRF攻击的原因是浏览器会自动带上cookie，而浏览器不会自动带上 token