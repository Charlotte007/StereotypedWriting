## 😊 说一说前端异常如何监控

### 错误的捕获的方式

- `onerror`, `onerror`可以捕获到宏任务抛出的错误。而`Promise`和`async`函数抛出的错误是捕获不到的。
- `window.addEventListener('error', () => {}, true)`, 由于资源请求异常不会冒泡，只有在捕获阶段才能获取到。可以使用`window.addEventListener`设置为捕获阶段触发，用来捕获资源请求的错误。
- `onunhandledrejection`, `onunhandledrejection`可以捕获微任务中的错误。但是没有错误行和列等位置信息。（不推荐直接使用，建议自己主动上报，可以对请求库进行封装，发生错误时自动上报）。
- `try…catch`, 无法捕获到异步中的错误(微任务, 以及`setTimeout`)中的错误。并且`try…catch`也无法捕获语法错误。

#### React

React可以使用**错误边界**组件对UI做降级处理。使用`static getDerivedStateFromError()`降级UI。`componentDidCatch`用于上报错误。
#### 一些常见的问题

- Script error。对于本域的js抛出的错误，onerror包含了详情的错误信息。对于其他域的js抛出的错误，只会在msg中显示简单的 Script error。可以在script标签上添加，crossorigin属性，静态文件服务器开启CORS。

### 错误信息格式化

不同浏览器错误信息格式可能不同。可以使用`tracekit`库对错误信息格式化。
### 错误的上报

1. ajax上报错误
2. 使用gif图上报错误
### 定位外网错误位置

线上的代码都是混淆压缩的，无法直接定位源码中的错误。可以使用SourceMap中的mappings属性还原源码。在发布时，可以在内网保存SourceMap文件，使用`https://github.com/mozilla/source-map`这个库定位错误。

> https://github.com/BengBu-YueZhang/trashcan-broom，接错误信息结合SourceMap文件定位错误的代码。

## 说一说前端的性能指标，以及性能监控

## 说一说前端页面秒开优化

## 了解过lerna吗

## 说一说组件库按需引入的原理

## 说一说CommonJS, AMD, UMD, ES6模块的差异


## 埋点为什么使用gif
