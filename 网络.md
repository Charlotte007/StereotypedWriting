## 😊 什么是HSTS?

HSTS(HTTP Strict Transport Security), 强制客户端使用HTTPS访问页面，使用原理:

1. 在服务器响应头中添加`Strict-Transport-Security`，可以设置`max-age`
2. 下次如果使用`http`访问，如果`max-age`未过期，客户端会进行内部跳转，可以看到`307 Redirect Internel`的响应码
3. 客户端使用`https`访问页面
## 😊 缓存

### 缓存的命中规则

![rule.png](https://i.loli.net/2021/07/31/v4Z87GEjmN3FwYu.png)
### 说一说强缓存

强制缓存就是向浏览器缓存查找该请求结果，并根据该结果的缓存规则来决定是否使用该缓存结果的过程。强缓存又分为两种Expires和Cache-Control

#### Expires

`HTTP/1.0`, 存在在HTTP返回的**响应头**之中。

```shell
# 一天后过期
expires 1d;
```
#### Cache-Control

`HTTP/1.1`, 存在在HTTP**响应头**以及**请求头**之中。

```shell
# 最大缓存时间3600秒
Cache-Control:max-age=3600
```

##### cache-control: no-cache 和 cache-control: no-store的区别是什么?

- `no-store`: 永远都不要在客户端存储缓存，每次永远都要从原始服务器获取资源
- `no-cache`: 
    - 如果在响应头之中。可以在客户端存储资源，但每次都「必须去服务器做新鲜度校验」，来决定从服务器获取最新资源 (200) 还是从客户端读取缓存 (304)，即所谓的协商缓存。
    - 如果在请求头之中。告知(代理)服务器不直接使用缓存，要求向原服务器发起请求。
### 说一说协商缓存

协商缓存就是强制缓存失效后，浏览器携带缓存标识向服务器发起请求，由服务器根据缓存标识决定是否使用缓存的过程。

#### Last-Modified / If-Modified-Since

- Last-Modified, 位于响应头上，浏览器在第一次发送请求后，服务器响应会携带上`Last-Modified`字段，返回给客户端, `Last-Modified`携带的是资源最后的修改时间。
- If-Modified-Since, 位于请求头上，浏览器在下一次请求的时候，会把之前`Last-Modified`字段的携带上，服务器获取If-Modified-Since字段后，会和服务器中该资源的最后修改时间Last-Modified对比, 询问服务器在该日期后资源是否有更新，有更新的话就会将新的资源发送回来。否则读取本地缓存。
#### ETag / If-None-Match

- ETag，位于响应头上，ETag是资源的唯一标识（由服务器生成），会在返会响应的时候，将这个值给浏览器。
- If-None-Match，位于请求头上，再次请求的时候，会将ETag的值通过If-None-Match字段发送给服务器。当服务器发现 If-None-Match的值与资源的标识一致时，则返回304，并从本地缓存获取资源，否则重新获取新数据。

> ETag会消耗服务器资源(因为会有额外的计算)
## 😊 DNS是什么？

DNS，域名解析系统，是因特网上作为域名和IP地址相互映射的一个分布式数据库。它的作用非常简单，就是可以根据域名查出对应的IP地址。DNS查询分为递归查询和迭代查询。优先递归查询，然后是迭代查询。
### DNS解析的过程

1. 首先，会依次检查浏览器缓存，操作系统缓存，本地硬盘的hosts文件，路由器缓存，查找对应的IP地址，找到就直接返回；否则下一步。
2. 将请求发送给本地DNS服务器，在本地DNS服务器缓存中查询，如果查找到就直接返回，否则下一步；(1, 2都是递归查询，这些缓存被称为DNS高速缓存)
3. 本地DNS服务器向**根域名服务器**发送请求，根域名服务器会告诉本地DNS服务器去查询哪个**顶级域名服务器**。
4. 本地域名服务器向**顶级域名服务器**发起查询请求，顶级域名服务器会告诉本地DNS服务器，去查找哪个**权限域名服务器**。
5. 本地域名服务器向**权限域名服务器**发起查询请求，权限域名服务器告诉本地域名服务器请求域名所对应的IP地址。（3，，4，5被称为迭代查询）。
6. 最后，本地域名服务器告诉客户端请求域名所对应的IP地址。
## 网络协议的分层

## Connection: keep-alive 做了些什么

## 什么是正向代理？什么是反向代理？

## 什么是单工、半双工和全双工通信？

## CDN 服务如何实现网络加速？

## HTTP 中提升传输速率的方式有哪些？常用的内容编码方式有哪些？

## 传输图片的过程中如果突然中断，如何在恢复后从之前的中断中恢复传输？

## 😊 常见的http状态码

- 301 （永久重定向） 请求的网页已永久移动到新位置。 服务器返回此响应（对 GET 或 HEAD 请求的响应）时，会自动将请求者转到新位置，url 会换成新的。
- 302 （临时重定向） 旧地址仍然可以访问。比如未登录，跳转到登录页。
- 304 （未修改） 自从上次请求后，请求的网页未修改过。 服务器返回此响应时，不会返回网页内容。数据从缓存获取。
- 400 （错误请求） 服务器不理解请求的语法。
- 401 （未授权） 请求要求身份验证。 对于需要登录的网页，服务器可能返回此响应。
- 403 （禁止） 服务器拒绝请求。
- 404 （未找到） 服务器找不到请求的资源。
- 405 （方法禁用） 禁用请求中指定的方法。
- 500 （服务器内部错误） 服务器遇到错误，无法完成请求。
- 501 （尚未实施） 服务器不具备完成请求的功能。例如，服务器无法识别请求方法时可能会返回此代码。
- 502 （错误网关） 服务器作为网关或代理，从上游服务器收到无效响应。
- 503 （服务不可用） 服务器目前无法使用（由于超载或停机维护）。
- 504（网关超时） 服务器作为网关或代理，但是没有及时从上游服务器收到请求。
- 505 （HTTP 版本不受支持） 服务器不支持请求中所用的 HTTP 协议版本。

## 301与302的区别

## 永久性重定向（301）和临时性重定向（302）对 SEO 有什么影响

## 为什么 HTTP1.1 不能实现多路复用

## CDN 有哪些静态资源优化加载速度的机制？

## http3.0

## E-tag 保存在哪里，怎么匹配，谁匹配(E-tag到底怎么用的)

## 如何删除 cookie

## 😊 说一说TCP和UDP

## WebSocket 使用的是 TCP 还是 UDP 协议？

## 😊 说一说http2

### http1.x和http2的区别

## 😊 同源策略和跨域方案

### 同源策略

协议/域名/端口，三者有一个不同就是跨域。二级域名之间也存在跨域问题。

对于不同源有如下的限制：

1. cookie、localStorage和indexDB无法读取。
2. ajax请求不能发送

### 跨域方案

1. cors
2. jsonp

## JSONP的原理

## 😊 CORS

## 😊 说一说三次握手

### 为什么是三次?

## 😊 说一说四次挥手


## 😊 说一说http和https的区别


![image](https://segmentfault.com/img/remote/1460000017544858?w=543&h=248)

HTTPS并非是应用层的一种新协议。只是HTTP通信接口部分用SSL/TLS协议代替。HTTPS协议的主要功能基本都依赖于TLS/SSL协议，而TLS/SSL依赖于三类基本算法：

![image](https://segmentfault.com/img/remote/1460000017544859?w=539&h=300)

- 散列函数，验证信息的完整性。
- 对称加密，实现明文的加密。
- 非对称加密，实现身份认证和密钥协商。

![image](https://segmentfault.com/img/remote/1460000017544860?w=561&h=297)

1. HTTPS需要用到SSL证书，而HTTP不用。（HTTPS先和SSL通信，再由SSL和TCP通信了，HTTP直接和TCP通信）
2. HTTPS是密文传输，HTTP是明文传输
3. HTTPS标准端口443，HTTP标准端口80
4. HTTPS基于传输层，HTTP基于应用层
5. HTTPS比HTTP对搜索引擎更友好，利于SEO。

## 😊 什么是对称加密？什么是非对称加密？

1. 对称加密，加密和解密使用同一个秘钥
2. 非对称加密，有两个秘钥，公钥和私钥。使用公钥对信息进行加密处理。使用私钥解密。

HTTPS采用对称加密 + 非对称加密的方式
## 😊 什么是数字证书？


### 数字证书认证机构认证流程

1. 向第三方机构（CA）提交公钥、组织信息、个人信息(域名)等信息并申请认证。
2. CA通过线上、线下等多种手段验证申请者提供信息的真实性，如组织是否存在、企业是否合法，是否拥有域名的所有权等
3. 如信息审核通过，CA会向申请者签发认证文件-证书。证书包含以下信息：申请者公钥、申请者的组织信息和个人信息、签发机构 CA的信息、有效时间、证书序列号等信息的明文，同时包含一个签名。其中签名的产生算法，首先，使用散列函数计算公开的明文信息的信息摘要，然后，采用CA的私钥对信息摘要进行加密，密文即签名;
4. 客户端Client向服务器Server发出请求时，Server返回证书文件。
5. 客户端Client读取证书中的相关的明文信息，采用相同的散列函数计算得到信息摘要，然后，利用对应CA的公钥解密签名数据，对比证书的信息摘要，如果一致，则可以确认证书的合法性，即服务器的公开密钥是值得信赖的。
6. 客户端还会验证证书相关的域名信息、有效时间等信息; 客户端会内置信任CA的证书信息(包含公钥)，如果CA不被信任，则找不到对应 CA的证书，证书也会被判定非法。

## 😊 说一说https的原理（工作流程）

HTTPS是在HTTP上建立SSL加密层，并对传输数据进行加密，是HTTP协议的安全版。https使用**对称加密（用来发送内容）** + **非对称加密（用来传输用于对称加密的密钥）**。使用非对称加密速度比较慢，所以非对称加密仅仅用来传输对称加密的密钥。

![image.png](https://i.loli.net/2021/05/06/wW6BvrTC8Puogj1.png)

1.Client发起一个HTTPS的请求，根据RFC2818的规定，Client默认连接Server的443（默认）端口。
2.Server把事先配置好的公钥证书返回给客户端。
3.Client验证公钥证书
4.Client生成对称密钥（用于对称加密的密钥），然后用证书的公钥加密这个对称密钥，发给Server。
5.Server使用自己的私钥解密这个消息，得到对称密钥。至此，Client和Server双方都持有了相同的对称密钥。
6.Server使用对称密钥加密“明文内容A”，发送给Client。
7.Client使用对称密钥解密响应的密文，得到“明文内容A”。
8.Client再次发起HTTPS的请求，使用对称密钥加密请求的“明文内容B”，然后Server使用对称密钥解密密文，得到“明文内容B”。

## 😊 说一说HTTP常用的请求方式


## 😊 CDN是什么？为什么要用？

## 😊 CDN有哪些静态资源优化加载速度的机制？

## 😊 从输入url到页面展示经过了哪些步骤


## 😊 安全问题

### XSS攻击

#### 基于反射XSS攻击

1. 攻击者构造出特殊的URL，其中包含恶意代码。
2. 用户打开带有恶意代码的URL时，网站服务端将恶意代码从URL中取出，拼接在html中。
3. 用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行
#### 基于存储XSS攻击

1. 攻击者将恶意代码提交到目标网站的数据库中。
2. 数据拼接在HTML中返回给浏览器。
3. 用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。

#### 解决办法

1. 输入的内容需要做过滤或者转译
2. 使用CSP（Content-Security-Policy）,静止内联JS代码的执行，指定白名单的js执行。CSP也可以用来限制其他静态资源。
### CSRF攻击

用户登录后，服务端下发cookie。第三方站点添加了一个图片，图片的连接是一个请求。请求会自动携带cookie的信息。

#### 解决办法

1. 设置SameSite属性，禁止第三方站点访问cookie
    - Strict，完全禁止第三方cookie
    - Lax，只会在a标签的连接，预加载，GET表单携带cookie
    - None，对cookie不限制，但是必须设置Secure属性（cookie只能通过https协议发送）否则无效。
2. 后端验证请求的http referer。
3. 使用token替代cookie。

### cookie和token都存放在header中，为什么不会劫持token?

CSRF攻击的原因是浏览器会自动带上cookie，而浏览器不会自动带上 token
## TCP滑动窗口

## TCP如何保证有效传输及拥塞控制原理

## 说一说WebSocket与Ajax的区别

## 说一说HTTP如何实现长连接？在什么时候会超时？

## 说一说OSI七层模型和TCP/IP四层模型

## 服务发现为什么用ip，而不用域名？

## 说一说OSI七层模型和TCP/IP四层模型

## 服务发现为什么用 ip，而不用域名？

## HTTP message的结构

## 什么是Same-Origin policy？如何分享Cross-Origin资源？

## 对称加密(Symmetric Encryption)和非对称加密(Asymmetric Encryption)的区别是什么?

## 扫码登录的原理

## webpack 动态加载 js 原理
