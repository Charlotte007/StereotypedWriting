## ğŸ˜Š JSçš„æ•°æ®ç±»å‹

Booleanã€Nullã€Undefinedã€Numberã€BigIntã€Stringã€Symbol å’Œ Object

## ğŸ˜Š Javascriptæ˜¯é™æ€ä½œç”¨åŸŸ(è¯æ³•ä½œç”¨åŸŸ)ä¸åŠ¨æ€ä½œç”¨åŸŸ?

Javascriptæ˜¯é™æ€ä½œç”¨åŸŸ, å‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±ç¡®å®šäº†ã€‚åŠ¨æ€ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™æ‰ç¡®ç«‹ã€‚

```js
var value = 1;

function foo() { console.log(value); }

function bar() { var value = 2; foo(); }

// å¦‚æœæ˜¯é™æ€ä½œç”¨åŸŸï¼Œæ‰“å°1
// å¦‚æœæ˜¯åŠ¨æ€ä½œç”¨åŸŸï¼Œæ‰“å°2
bar();
```

## ğŸ˜Š è¯´ä¸€è¯´æ‰§è¡Œä¸Šä¸‹æ–‡ 

æ´»åŠ¨çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šç»„æˆä¸€ä¸ªä¸Šä¸‹æ–‡å †æ ˆã€‚å †æ ˆçš„åº•éƒ¨æ˜¯å…¨å±€ä¸Šä¸‹æ–‡ï¼Œé¡¶éƒ¨å°±æ˜¯å½“å‰æ´»åŠ¨çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚

è¿›å…¥å‡½æ•°æ—¶ä¸Šä¸‹æ–‡ï¼Œå‡½æ•°çš„ä¸Šä¸‹æ–‡è¢«æ¨å…¥å †æ ˆ(ä½†æ˜¯ä¸åŒ…å«å‡½æ•°ä¸­åµŒå¥—å‡½æ•°çš„ä¸Šä¸‹æ–‡)ã€‚å½“å‡½æ•°`return`æ—¶ï¼Œå‡½æ•°ä¸Šä¸‹æ–‡å¼¹å‡ºå †æ ˆã€‚å½“æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæˆåï¼ŒECStackä¸­åªä¼šå­˜åœ¨ä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚

### å˜é‡å¯¹è±¡(VO)/æ´»åŠ¨å¯¹è±¡(AO)

å˜é‡å¯¹è±¡VO, æ˜¯ä¸€ä¸ªä¸æ‰§è¡Œä¸Šä¸‹æ–‡ç›¸å…³çš„ç‰¹æ®Šå±æ€§ï¼Œå®ƒå­˜å‚¨ç€ä¸Šä¸‹æ–‡ä¸­ä»¥ä¸‹å†…å®¹ï¼š**å˜é‡**, **å‡½æ•°çš„å£°æ˜ï¼ˆä¸åŒ…å«å‡½æ•°è¡¨è¾¾å¼ï¼Œä½†æ˜¯åŒ…å«ä¿å­˜å‡½æ•°è¡¨è¾¾å¼çš„å˜é‡ï¼‰**, **å‡½æ•°çš„å½¢å‚**ï¼Œå®ƒä»¬ä½œä¸ºVOå¯¹è±¡çš„å±æ€§ã€‚

å…¨å±€å¯¹è±¡æ˜¯åœ¨è¿›å…¥ä»»ä½•ä¸Šä¸‹æ–‡ä¹‹å‰å°±å·²ç»åˆ›å»ºçš„å¯¹è±¡ï¼Œå…¨å±€å¯¹è±¡åªå­˜åœ¨ä¸€ä»½ã€‚å…¨å±€å¯¹è±¡åœ¨åˆ›å»ºé˜¶æ®µï¼Œä¼šå°†`Math`ã€`String`ã€`Date`ã€`parseInt`ä½œä¸ºè‡ªèº«å±æ€§è¿›è¡Œåˆå§‹åŒ–ã€‚å…¶ä»–çš„å…¨å±€å˜é‡ä¹Ÿä¼šå½“ä½œå…¨å±€å¯¹è±¡çš„å±æ€§ã€‚å…¨å±€ä¸Šä¸‹æ–‡çš„VOï¼Œå°±æ˜¯å…¨å±€å¯¹è±¡è‡ªå·± ï¼ˆ`globalContext.VO === global`ï¼‰
#### å‡½æ•°ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡

å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­VOæ— æ³•ç›´æ¥è®¿é—®ã€‚åœ¨å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨æ´»åŠ¨å¯¹è±¡AOæ›¿ä»£å˜é‡å¯¹è±¡VOçš„åŠŸèƒ½ã€‚AOæ˜¯åœ¨è¿›å…¥å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶è¢«åˆ›å»ºçš„ã€‚
#### å¤„ç†ä¸Šä¸‹æ–‡ä¹‹ä¸­ä»£ç çš„ä¸¤ä¸ªé˜¶æ®µ
##### é˜¶æ®µ1ï¼šè¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡

åœ¨ä»£ç è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ï¼Œè¿˜æ²¡æœ‰å¼€å§‹æ‰§è¡Œæ—¶ï¼ŒVO/AOå°±å·²ç»åŒ…å«äº†ä¸‹é¢çš„å±æ€§

- å½¢å‚, å½¢å‚ä¼šä½œä¸ºAOå¯¹è±¡çš„å±æ€§ï¼Œå¦‚æœä¼ å‚äº†å±æ€§ä¼šè¢«èµ‹å€¼ï¼Œå¦åˆ™æ˜¯undefinedã€‚
- å‡½æ•°å£°æ˜ï¼Œå‡½æ•°åå’Œå‡½æ•°çš„å†…å®¹ä½œä¸ºå˜é‡å¯¹è±¡çš„keyå’Œvalueï¼ˆå‡½æ•°å£°æ˜çš„ä¼˜å…ˆçº§ä¼šé«˜äºå˜é‡å£°æ˜ï¼Œå¦‚æœå˜é‡å£°æ˜ä¸å‡½æ•°å£°æ˜æœ‰ç›¸åŒå±æ€§ï¼Œå‡½æ•°å£°æ˜ä¼šæ›¿ä»£å˜é‡å£°æ˜ï¼Œå‡½æ•°å£°æ˜åœ¨è¿›å…¥ä¸Šä¸‹æ–‡çš„é˜¶æ®µå°±ä¼šè¢«èµ‹å€¼, æ‰€ä»¥åœ¨å‡½æ•°å£°æ˜å‰è°ƒç”¨å®ƒä¸ä¼šæŠ¥é”™ï¼Œåœ¨ä»£ç æ‰§è¡Œé˜¶æ®µå‡½æ•°å£°æ˜ä¸ä¼šé‡å¤çš„èµ‹å€¼ï¼‰
- å˜é‡å£°æ˜ï¼Œå˜é‡çš„å£°æ˜ä¼˜å…ˆçº§åœ¨å½¢å‚å’Œå‡½æ•°å£°æ˜ä¹‹åã€‚

##### é˜¶æ®µ2ï¼šæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ä»£ç 

æ¥ä¸‹æ¥è¿›å…¥ä»£ç æ‰§è¡Œé˜¶æ®µï¼Œæ­¤æ—¶AO/VOå¯¹è±¡éƒ½å·²ç»æœ‰äº†å±æ€§ï¼Œå¹¶ä¸”å±æ€§å€¼è¿˜æ˜¯undefinedï¼Œä»£ç æ‰§è¡Œé˜¶æ®µVOå±æ€§ä¼šè¢«æ›´æ–°èµ‹å€¼ã€‚

ä¸ºä»€ä¹ˆjsä¸­å˜é‡çš„é»˜è®¤å€¼æ˜¯undefinedçš„ï¼Ÿå› ä¸ºåœ¨è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡çš„é˜¶æ®µï¼ŒVO/AOå¯¹è±¡çš„å±æ€§å€¼å°±è¢«èµ‹äºˆäº†undefinedï¼Œæ‰€ä»¥jså˜é‡å€¼é»˜è®¤æ˜¯è¢«èµ‹äºˆäº†undefinedï¼Œè€Œä¸æ˜¯å¤©ç”Ÿå°±æ˜¯undefinedã€‚

å³ä½¿æ°¸è¿œèµ°ä¸åˆ°çš„åˆ†æ”¯ä»£ç ï¼Œä¹Ÿä¼šèµ‹å€¼ä¸ºundefinedï¼Œè¿™æ˜¯å› ä¸ºåœ¨è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡çš„é˜¶æ®µæ”¾å…¥VOä¸­è¢«èµ‹å€¼ä¸ºundefinedã€‚

## ğŸ˜Š è¯´ä¸€è¯´ä½œç”¨åŸŸ

åœ¨JSä¸­å…è®¸åµŒå¥—å‡½æ•°ï¼Œæ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰è‡ªèº«çš„å˜é‡å¯¹è±¡VOï¼Œç”±äºå‡½æ•°æ— æ³•ç›´æ¥è®¿é—®VOï¼Œå¯¹äºå‡½æ•°æ¥è¯´å°±æ˜¯AOæ´»åŠ¨å¯¹è±¡ã€‚è€Œä½œç”¨åŸŸé“¾åˆ™æ˜¯AOçš„åˆ—è¡¨ã€‚ä½œç”¨åŸŸé“¾ä½œç”¨æ˜¯ç”¨äºå˜é‡çš„æŸ¥è¯¢ã€‚å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåœ¨å‡½æ•°è°ƒç”¨æ—¶åˆ›å»ºã€‚åŒ…å«äº†VO/AOå±æ€§ï¼Œä»¥åŠ[[scope]]å±æ€§ã€‚è€Œä½œç”¨åŸŸé“¾Scopeå±æ€§ï¼Œç­‰äºVO + `[[scope]]`å±æ€§

### [[scope]]å±æ€§

`[[scope]]`æ˜¯å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„å±æ€§ï¼Œ`[[scope]]`å±æ€§åŒ…å«æ‰€æœ‰çˆ¶å˜é‡å¯¹è±¡ï¼ˆVOï¼‰çš„å±‚çº§é“¾ã€‚`[[scope]]`åœ¨å‡½æ•°åˆ›å»ºæ—¶è¢«åˆ›å»ºå¹¶å­˜å‚¨ï¼Œä¸å¯å˜ã€‚ç›´åˆ°å‡½æ•°è¢«é”€æ¯ï¼Œä¹Ÿå°±æ˜¯è¯´ä½œç”¨åŸŸé“¾åœ¨å®šä¹‰å‡½æ•°æ—¶å°±å·²ç»ç¡®å®šçš„ï¼Œå³ä½¿å‡½æ•°ä¸è¢«è°ƒç”¨ï¼Œå®ƒçš„çš„`[[scope]]`å±æ€§ä¹Ÿå·²ç»è¢«å†™å…¥äº†ã€‚
### å‡½æ•°æ¿€æ´»

è¿›å…¥ä¸Šä¸‹æ–‡ï¼Œåˆ›å»ºAO/VOå¯¹è±¡åï¼ŒAO/VOå¯¹è±¡ä¼šæ·»åŠ Scopeå±æ€§çš„ç¬¬ä¸€ä½ï¼Œè¿™å¯¹äºæ ‡ç¤ºç¬¦è§£æå¾ˆé‡è¦ï¼Œå› ä¸ºå˜é‡åçš„æŸ¥æ‰¾æ˜¯ä»æœ€æ·±å¤„å¼€å§‹çš„ï¼Œç”±äºå½“å‰çš„AO/VOå¯¹è±¡ä¼šæ”¾åˆ°ç¬¬ä¸€ä½ï¼Œæ‰€ä»¥å±€éƒ¨çš„å˜é‡ä¼˜å…ˆçº§åœ¨æŸ¥æ‰¾æ—¶ä¼šé«˜äºçˆ¶ä½œç”¨åŸŸçš„å˜é‡ã€‚
Scopeå±æ€§ = [å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„AO/VO, [[scope]]]ã€‚
### ä¿®æ”¹ä½œç”¨åŸŸé“¾

withå’Œcatchä¼šä¿®æ”¹ä½œç”¨åŸŸé“¾ï¼Œè¢«ä¿®æ”¹çš„ä½œç”¨åŸŸé“¾ `Scope = [withçš„å‚æ•°, AO|VO, [[Scope]]]`ã€‚

## ğŸ˜Š è¯´ä¸€è¯´é—­åŒ…

> MDNå¯¹é—­åŒ…çš„å®šä¹‰ä¸ºï¼š**é—­åŒ…æ˜¯æŒ‡é‚£äº›èƒ½å¤Ÿè®¿é—®è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚**

> é‚£ä»€ä¹ˆæ˜¯è‡ªç”±å˜é‡å‘¢ï¼Ÿè‡ªç”±å˜é‡æ˜¯æŒ‡åœ¨å‡½æ•°ä¸­ä½¿ç”¨çš„ï¼Œä½†æ—¢ä¸æ˜¯å‡½æ•°å‚æ•°ä¹Ÿä¸æ˜¯å‡½æ•°çš„å±€éƒ¨å˜é‡çš„å˜é‡ã€‚

> ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºé—­åŒ…å…±æœ‰ä¸¤éƒ¨åˆ†ç»„æˆï¼šé—­åŒ… = å‡½æ•° + å‡½æ•°èƒ½å¤Ÿè®¿é—®çš„è‡ªç”±å˜é‡

**é—­åŒ…æ˜¯ä»£ç å—å’Œåˆ›å»ºè¯¥ä»£ç å—çš„ä¸Šä¸‹æ–‡ä¸­æ•°æ®çš„ç»“åˆã€‚**å‡½æ•°çš„çˆ¶çº§ä¸Šä¸‹æ–‡æ•°æ®ä¿å­˜åœ¨å‡½æ•°çš„å†…éƒ¨å±æ€§`[[scope]]`ä¸­ï¼Œç”±äºjsæ˜¯ä½¿ç”¨é™æ€è¯æ³•ä½œç”¨åŸŸçš„è¯­è¨€ï¼ŒåŒ…å«äº†çˆ¶çº§ä¸Šä¸‹æ–‡çš„æ•°æ®çš„`[[scope]]`å±æ€§ï¼Œåœ¨å‡½æ•°åˆ›å»ºæ—¶å°±å·²ç»ä¿å­˜äº†ï¼Œä¸ç®¡å‡½æ•°æœ‰æ²¡æœ‰è°ƒç”¨ã€‚å› ä¸ºä½œç”¨åŸŸé“¾ï¼Œåœ¨jsä¸­æ‰€æœ‰å‡½æ•°éƒ½æ˜¯é—­åŒ…ï¼Œå› ä¸ºå®ƒä»¬åœ¨åˆ›å»ºçš„æ—¶å€™ï¼Œéƒ½ä¿å­˜äº†ä¸Šå±‚ä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾ã€‚åœ¨åŒä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­åˆ›å»ºçš„é—­åŒ…ï¼Œå…±ç”¨ä¸€ä¸ª`[[scope]]`å±æ€§ï¼Œå¯¹`[[scope]]`çš„ä¿®æ”¹ï¼Œä¼šå½±å“åˆ°å…¶ä»–é—­åŒ…ã€‚ä¹Ÿå°±æ˜¯è¯´åŒä¸€ä¸ªä¸Šä¸‹æ–‡åˆ›å»ºçš„é—­åŒ…ï¼Œå…±äº«åŒä¸€ä¸ªçˆ¶ä½œç”¨åŸŸã€‚

## ğŸ˜Š è¯´ä¸€è¯´äº‹ä»¶å¾ªç¯

### ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ï¼Ÿ

JSçš„æ‰§è¡Œï¼Œæµè§ˆå™¨çš„æ¸²æŸ“ï¼ŒDOMå­˜å‚¨éƒ½åœ¨**ä¸»çº¿ç¨‹**ä¸Šè¿›è¡Œã€‚æµè§ˆå™¨ä¼šè¡ç”Ÿå‡ºä¸€äº›å…¶ä»–çº¿ç¨‹ç”¨æ¥å¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œç›‘æ§è¾“å…¥è®¾å¤‡ç­‰ã€‚ä¸€æ—¦è¡ç”Ÿçº¿ç¨‹ï¼Œéœ€è¦é¡µé¢å“åº”ï¼Œå®ƒä»¬ä¼šé€šçŸ¥ä¸»çº¿ç¨‹ï¼Œè¿™å°±æ˜¯**äº‹ä»¶å¾ªç¯**åšçš„äº‹æƒ…ã€‚**ç›‘å¬è¡ç”Ÿçº¿ç¨‹ï¼Œå¹¶é€šçŸ¥ä¸»çº¿ç¨‹**ã€‚

### ä»»åŠ¡é˜Ÿåˆ—

å¯¹äº`setTimeout`, `setTimeout`ä¼šå‘ä»»åŠ¡é˜Ÿåˆ—ä¸­æ·»åŠ ä»»åŠ¡ã€‚ä»»åŠ¡é˜Ÿåˆ—åœ¨ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œå¹¶è¡Œç­‰å¾…ï¼Œç­‰å¾…å®Œæˆåï¼Œä¼šå›åˆ°ä¸»çº¿ç¨‹å½“ä¸­ã€‚å½“ä»»åŠ¡å›åˆ°ä¸»çº¿ç¨‹åï¼Œä¸»çº¿ç¨‹ä¼šå»æ‰§è¡Œæ·»åŠ çš„ä»»åŠ¡ã€‚
### æµè§ˆå™¨æ¸²æŸ“

æµè§ˆå™¨æ¸²æŸ“çš„è¿‡ç¨‹åŒ…å«äº†CSSæ ·å¼è®¡ç®—, æ„å»ºæ¸²æŸ“æ ‘, è®¡ç®—å…ƒç´ çš„ä½ç½®åƒç´ , ç„¶åç»˜åˆ¶ã€‚æµè§ˆå™¨æ¸²æŸ“å’Œæ‰§è¡Œä»»åŠ¡åˆ†åˆ«**ä¸»çº¿ç¨‹çš„ä¸¤ç«¯**ã€‚
ä¸»çº¿ç¨‹å¿…é¡»æ‰§è¡Œä»»åŠ¡åæ‰ä¼šè¿›è¡Œæµè§ˆå™¨æ¸²æŸ“çš„æ“ä½œã€‚ä½†æ˜¯é‡åˆ°äº†`while(true)`, ç›¸å½“äºé‡åˆ°äº†ä¸€ä¸ªæ°¸è¿œæ— æ³•æ‰§è¡Œå®Œæˆçš„ä»»åŠ¡ï¼Œæ‰€ä»¥æµè§ˆå™¨æ°¸è¿œä¸ä¼šè¿›è¡Œæ¸²æŸ“æ“ä½œï¼Œå¯¼è‡´æµè§ˆå™¨å¡æ­»ã€‚ä¸»çº¿ç¨‹çš„å·¥ä½œæµç¨‹å¯ä»¥ç®€å•æ¦‚æ‹¬ä¸ºï¼Œ`æ‰§è¡Œä»»åŠ¡ --> æµè§ˆå™¨æ¸²æŸ“ --> æ‰§è¡Œä»»åŠ¡ --> æµè§ˆå™¨æ¸²æŸ“`ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**æ‰§è¡Œä»»åŠ¡åï¼Œæµè§ˆå™¨æ˜¯ä¸èƒ½ä¿è¯ä¸€å®šä¼šé‡æ–°æ¸²æŸ“çš„ï¼Œå¯èƒ½æˆ‘ä»¬å¤šæ¬¡æ‰§è¡Œä»»åŠ¡ä¹‹åï¼Œæµè§ˆå™¨æ‰ä¼šæ¸²æŸ“ä¸€æ¬¡**ã€‚

### requestAnimationFrame

requestAnimationFrameåªä¼šåœ¨æµè§ˆå™¨æ¸²æŸ“å‰æ‰§è¡Œï¼Œå’Œå®ä»»åŠ¡ï¼Œå¾®ä»»åŠ¡æ— å…³ã€‚

### å¾®ä»»åŠ¡

å¾®ä»»åŠ¡åˆ°åº•ä¼šåœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Œä¼šåœ¨å®ä»»åŠ¡ç»“æŸåæ‰§è¡Œå—ï¼Ÿè¿™ç§è¯´æ³•åªèƒ½è¯´éƒ¨åˆ†æ­£ç¡®ã€‚æ­£ç¡®çš„è¯´æ³•åº”è¯¥æ˜¯å®ä»»åŠ¡å †æ ˆä¸ºç©ºæ—¶æ‰§è¡Œã€‚
### äº‹ä»¶å¾ªç¯çš„æ•´ä½“é¡ºåº

1. æ‰§è¡Œå®ä»»åŠ¡
2. å®ä»»åŠ¡æ‰§è¡Œæ ˆä¸ºç©ºï¼ŒæŸ¥è¯¢æ˜¯å¦æœ‰å¾®ä»»åŠ¡éœ€è¦æ‰§è¡Œ
3. æ¸…ç©ºå¾®ä»»åŠ¡æ ˆ
4. å¯èƒ½ä¼šæ‰§è¡ŒrequestAnimationFrameï¼Œç„¶åæ¸²æŸ“æµè§ˆå™¨
5. ä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯
### äº‹ä»¶å¾ªç¯çš„é¢˜ç›®

```js
// 1, 2, 3, 4, 5, 6
setTimeout(() => {
  console.log(1)
  new Promise((resolve, reject) => {
    console.log(2)
    resolve()
  }).then(() => {
    console.log(3)
  })
}, 0)

setTimeout(() => {
  new Promise((resolve) => {
    resolve()
  }).then(() => {
    console.log(4)
    new Promise((resolve) => {
      resolve()
    }).then(() => {
      console.log(5)
    })
  }).then(() => {
    console.log(6)
  })
}, 0)
```

## ğŸ˜Š è¯´ä¸€è¯´åŸå‹é“¾

![åŸå‹é“¾](https://i.loli.net/2021/07/18/uBlOcmVhWFSpvX2.png)

JavaScript åªæœ‰ä¸€ç§ç»“æ„ï¼šå¯¹è±¡ã€‚æ¯ä¸ªå®ä¾‹å¯¹è±¡ï¼ˆobjectï¼‰éƒ½æœ‰ä¸€ä¸ªç§æœ‰å±æ€§ï¼ˆç§°ä¹‹ä¸º __proto__ ï¼‰æŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼ˆprototypeï¼‰ã€‚è¯¥åŸå‹å¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªè‡ªå·±çš„åŸå‹å¯¹è±¡ï¼ˆ__proto__ï¼‰ï¼Œå±‚å±‚å‘ä¸Šç›´åˆ°ä¸€ä¸ªå¯¹è±¡çš„åŸå‹å¯¹è±¡ä¸º nullã€‚æ ¹æ®å®šä¹‰ï¼Œnull æ²¡æœ‰åŸå‹ï¼Œå¹¶ä½œä¸ºè¿™ä¸ªåŸå‹é“¾ä¸­çš„æœ€åä¸€ä¸ªç¯èŠ‚ã€‚(MDNçš„è§£é‡Š)

## ğŸ˜Š è¯´ä¸€è¯´ç»§æ‰¿
### ES5ç»§æ‰¿å®ç°

![es5.png](https://i.loli.net/2021/04/12/iaXDQAPbq93sLl6.png)

```js
/**
 * å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿
 */
// çˆ¶ç±»
function Father(name) {
  this.name = name
}
Father.prototype.sayName = function() {
  console.log(this.name)
}

// å­ç±»
// ç»§æ‰¿æ„é€ å‡½æ•°
function Son(name, age) {
  Father.call(this, name)
  this.age = age
}

// ä¿®æ­£åŸå‹é“¾
Son.prototype = Object.create(Father.prototype)
Son.prototype.constructor = Son

Son.prototype.sayAge = function() {
  console.log(this)
}
```
### ES6ç»§æ‰¿å®ç°

![es6ç»§æ‰¿.png](https://i.loli.net/2021/04/12/2CO5HRe4bda9GzK.png)

```js
class Father {
  constructor(name) { this.name = name }
  sayName() {
	  console.log(this.name)
  }
}

class Son extends Father {
  constructor(name, age) {
	  super(name)
	  this.age = age
  }
  sayAge(age) {
	  console.log(this.age)
  }
}
```
### ES5ç»§æ‰¿å’ŒES6ç»§æ‰¿æœ‰ä»€ä¹ˆåŒºåˆ«?

- `ES5`æ˜¯å…ˆåˆ›å»ºå­ç±»å®ä¾‹å¯¹è±¡çš„`this`ï¼Œç„¶åå†å°†çˆ¶ç±»çš„æ–¹æ³•æ·»åŠ åˆ°`this`ä¸Šé¢ï¼ˆ`Parent.apply(this)`ï¼‰ã€‚
- `ES6`çš„ç»§æ‰¿æœºåˆ¶å®Œå…¨ä¸åŒï¼Œå®è´¨ä¸Šæ˜¯å…ˆåˆ›å»ºçˆ¶ç±»çš„å®ä¾‹å¯¹è±¡thisï¼ˆ**æ‰€ä»¥å¿…é¡»å…ˆè°ƒç”¨çˆ¶ç±»çš„super()æ–¹æ³•**ï¼‰ï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®æ”¹thisã€‚å› ä¸ºå­ç±»æ²¡æœ‰è‡ªå·±çš„thiså¯¹è±¡ï¼Œè€Œæ˜¯ç»§æ‰¿äº†çˆ¶ç±»çš„thiså¯¹è±¡ï¼Œç„¶åå¯¹å…¶è¿›è¡ŒåŠ å·¥ï¼Œæ‰€ä»¥å¿…é¡»è°ƒç”¨superã€‚å¦‚æœä¸è°ƒç”¨superæ–¹æ³•ï¼Œå­ç±»å¾—ä¸åˆ°thiså¯¹è±¡ã€‚
- ES6ç»§æ‰¿ä¸­ä¼šæœ‰ä¸€æ¡é¢å¤–çš„ç»§æ‰¿é“¾ï¼Œåœ¨ES6ç»§æ‰¿ä¸­ï¼Œå­ç±»çš„æ„é€ å‡½æ•°`__proto__`æŒ‡å‘çˆ¶ç±»ã€‚ES5ç»§æ‰¿ä¸­å­ç±»æ„é€ å‡½æ•°æ²¡æœ‰è¿™æ¡ç»§æ‰¿é“¾ã€‚
- ES5çš„ç»§æ‰¿é€šè¿‡åŸå‹ï¼Œæ„é€ å‡½æ•°æœºåˆ¶æ¥å®ç°ã€‚
- ES6ä½¿ç”¨classå’Œextendså…³é”®å­—å®ç°
## ğŸ˜Š è¯´ä¸€è¯´this

thisæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ä¸€ä¸ªå±æ€§ã€‚åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­thisï¼Œå°±æ˜¯å…¨å±€å¯¹è±¡æœ¬èº«ã€‚åœ¨å‡½æ•°çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œthisæ˜¯åœ¨è¿›å…¥ä¸Šä¸‹æ–‡æ—¶ç¡®å®šçš„ã€‚ï¼ˆç®­å¤´å‡½æ•°æ˜¯åœ¨å®šä¹‰æ—¶ç¡®å®šçš„ï¼‰, ä½†æ˜¯åœ¨ä¸Šä¸‹æ–‡è¿è¡ŒæœŸé—´æ°¸ä¹…ä¸å˜ã€‚**å‡½æ•°ä¸Šä¸‹æ–‡çš„thiså–å†³äºè°ƒç”¨å‡½æ•°çš„æ–¹å¼ã€‚**è°ƒç”¨å‡½æ•°çš„æ–¹å¼å¦‚ä½•å½±å“thisï¼Ÿæˆ‘ä»¬éœ€è¦æ·±å…¥äº†è§£åªå­˜åœ¨åœ¨ECMAScriptè§„èŒƒä¸­çš„æŠ½è±¡ç±»å‹Referenceã€‚

### Reference

Referenceç±»å‹ï¼Œç®€å•çš„ç†è§£ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š

- base valueï¼Œå±æ€§æ‰€åœ¨çš„å¯¹è±¡æˆ–è€…å°±æ˜¯ EnvironmentRecord
- referenced nameï¼Œreferenced name å°±æ˜¯å±æ€§çš„åç§°

ä¸¾ä¸€ä¸ªä¾‹å­ï¼š

```js
var foo = 10;
// å¯¹åº”çš„Referenceæ˜¯ï¼š
var fooReference = {
  base: EnvironmentRecord,
  propertyName: 'foo'
};
 
function bar() {}
// å¯¹åº”çš„Referenceæ˜¯ï¼š
var barReference = {
  base: EnvironmentRecord,
  propertyName: 'bar'
};

var foo = {
  bar: function () {
    return this;
  }
};
// barå¯¹åº”çš„Referenceæ˜¯ï¼š
var BarReference = {
  base: foo,
  propertyName: 'bar',
};
```

### GetValue

GetValueå†…éƒ¨å‡½æ•°ï¼Œå¯ä»¥ä»Referenceç±»å‹è·å–å¯¹åº”çš„å€¼ã€‚ä½†æ˜¯è®°ä½è°ƒç”¨**GetValue**è¿”å›çš„ä¸åœ¨æ˜¯Referenceå¯¹è±¡

```js
GetValue(fooReference); // 10
GetValue(barReference); // function object "bar"
```

### thisä¸Referenceçš„å…³ç³»

1.è®¡ç®— MemberExpression çš„ç»“æœèµ‹å€¼ç»™ ref
2.åˆ¤æ–­ ref æ˜¯ä¸æ˜¯ä¸€ä¸ª Reference ç±»å‹
  - 2.1 å¦‚æœ ref æ˜¯ Referenceï¼Œå¹¶ä¸” IsPropertyReference(ref) æ˜¯ true, é‚£ä¹ˆ this çš„å€¼ä¸º GetBase(ref)
  - 2.2 å¦‚æœ ref æ˜¯ Referenceï¼Œå¹¶ä¸” base value å€¼æ˜¯ Environment Record, é‚£ä¹ˆthisçš„å€¼ä¸º ImplicitThisValue(ref)
  - 2.3 å¦‚æœ ref ä¸æ˜¯ Referenceï¼Œé‚£ä¹ˆ this çš„å€¼ä¸º undefined

- MemberExpression å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œ`å‡½æ•°å·¦è¾¹ ()`, å·¦è¾¹è¿™éƒ¨åˆ†å†…å®¹
- IsPropertyReferenceï¼Œå¦‚æœReferenceçš„baseæ˜¯ä¸€ä¸ªå¯¹è±¡è¿”å›true
- GetBase, è¿”å›Referenceçš„base
- ImplicitThisValueï¼Œå§‹ç»ˆè¿”å›undefined

ä¸‹é¢çœ‹å‡ ä¸ªä¾‹å­ï¼š

```js
// ä¾‹å­ä¸€
// fooReference = {
//   base: EnvironmentRecord,
//   propertyName: 'foo'
// };

// 1. refæ˜¯Referenceç±»å‹
// 2. IsPropertyReferenceè¿”å›false
// 3. ImplicitThisValueè¿”å›undefined
// thisç­‰äºundefinedï¼Œéä¸¥æ ¼æ¨¡å¼æ˜¯å…¨å±€å¯¹è±¡
function foo() {
  return this;
}
 
foo(); // global


// ä¾‹å­äºŒ
var foo = {
  bar: function () {
    return this;
  }
};
// fooBarReference = {
//   base: foo,
//   propertyName: 'bar'
// };
// 1. refæ˜¯Referenceç±»å‹
// 2. IsPropertyReferenceè¿”å›true
// 3. GetBase(ref)foo
// thisç­‰äºfoo
foo.bar(); // foo


// ä¾‹å­ä¸‰
var test = foo.bar;
// testReference = {
//   base: EnvironmentRecord,
//   propertyName: 'test'
// };
// 1. refæ˜¯Referenceç±»å‹
// 2. IsPropertyReferenceè¿”å›false
// 3. ImplicitThisValueè¿”å›undefined
// thisç­‰äºundefinedï¼Œéä¸¥æ ¼æ¨¡å¼æ˜¯å…¨å±€å¯¹è±¡
test(); // global


// ä¾‹å­å››
// barReference = {
//   base: AO,
//   propertyName: 'bar'
// };
// 1. refæ˜¯Referenceç±»å‹
// 2. IsPropertyReferenceè¿”å›false
// 3. ImplicitThisValueè¿”å›undefined
// thisç­‰äºundefinedï¼Œéä¸¥æ ¼æ¨¡å¼æ˜¯å…¨å±€å¯¹è±¡
function foo() {
  function bar() {
    alert(this); 
  }
  bar(); 
}
```

### éå¼•ç”¨å¯¹è±¡

è°ƒç”¨æ‹¬å·()çš„å·¦è¾¹æ˜¯å‡½æ•°å¯¹è±¡, ç›¸åº”åœ°ï¼Œthiså€¼æœ€ç»ˆè®¾ä¸ºå…¨å±€å¯¹è±¡ã€‚

```js
(function () {
  alert(this); // global
})();
```

å†çœ‹ä¸€ä¸ªä¾‹å­ï¼š

```js
var foo = {
  bar: function () {
    alert(this);
  }
};
 
foo.bar(); // fooï¼Œæ— éœ€è§£é‡Š
(foo.bar)(); // fooï¼Œ(foo.bar)æ²¡æœ‰è°ƒç”¨GetValueï¼Œæ‰€ä»¥è¿˜æ˜¯foo

// =ï¼Œ||, , ä¸‰ç§è¿ç®—ç¬¦è°ƒç”¨äº†GetValueï¼Œæ‰€ä»¥è¿”å›çš„ç»“æœæ˜¯å‡½æ•°å¯¹è±¡
// å¦‚æœrefä¸æ˜¯ Referenceï¼Œé‚£ä¹ˆthisçš„å€¼ä¸º undefined
(foo.bar = foo.bar)(); // globalï¼Œ
(false || foo.bar)(); // global
(foo.bar, foo.bar)(); // global
```
### æ„é€ å‡½æ•°ä¸­çš„this

æ„é€ å‡½æ•°ä¸­çš„thisï¼ŒæŒ‡å‘æ–°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡ã€‚


## ğŸ˜Š typeof

typeof ç”¨äºæ£€æµ‹å˜é‡æ•°æ®ç±»å‹ï¼Œç”±è§£é‡Šå™¨å†…éƒ¨å®ç°ã€‚

ä¸åŒçš„å¯¹è±¡åœ¨åº•å±‚éƒ½è¡¨ç¤ºä¸ºäºŒè¿›åˆ¶ï¼Œåœ¨ Javascript ä¸­äºŒè¿›åˆ¶å‰ï¼ˆä½ï¼‰ä¸‰ä½å­˜å‚¨å…¶ç±»å‹ä¿¡æ¯ã€‚

- 000: å¯¹è±¡
- 010: æµ®ç‚¹æ•°
- 100ï¼šå­—ç¬¦ä¸²
- 110ï¼š å¸ƒå°”
- 1ï¼š æ•´æ•°
- nullï¼šæ‰€æœ‰æœºå™¨ç å‡ä¸º 0

æ‰€ä»¥`typeof null`ä¼šè¿”å›"objcect"

## ğŸ˜Š instanceof

`A instanceof B`, è‡ªä¸‹å¾€ä¸ŠæŸ¥æ‰¾Açš„åŸå‹æ˜¯å¦ç­‰äº`B.prototype`ã€‚

```js
function myInstanceOf(obj, target) {
  if (typeof obj !== 'object' || obj === null) {
    return false
  }
  const proto = Object.getPrototypeOf(obj)
  if (proto === null) {
    return false
  }
  if (proto === target.prototype) {
    return true
  } else {
    return myInstanceOf(proto, target)
  }
}
```
## new

### å¦‚ä½•è®©å‡½æ•°ä¸èƒ½è¢«new?

## ç®­å¤´å‡½æ•°

## å˜é‡æå‡

## ç«‹å³æ‰§è¡Œå‡½æ•°
## ç§»åŠ¨ç«¯çš„å¸ƒå±€

## generateråŸç†

## asyncå’ŒawiatåŸç†

## mapå’Œobjectçš„åŒºåˆ«

## WeakSetä¸Setçš„åŒºåˆ«

- WeakSet, åªèƒ½å­˜å‚¨å¯¹è±¡ç±»å‹çš„æ•°æ®ï¼Œä¸èƒ½å­˜å‚¨æ™®é€šçš„å¯¹è±¡ç±»å‹ï¼Œä¸èƒ½éå†ã€‚WeakSetå†…éƒ¨çš„å¯¹è±¡æ˜¯å¼±å¼•ç”¨çš„ï¼Œä¸ä¼šé˜»æ­¢åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶WeakSetå†…éƒ¨çš„å¯¹è±¡ã€‚
- Setå¯ä»¥å­˜å‚¨å¯¹è±¡ç±»å‹çš„æ•°æ®ï¼Œä»¥åŠæ™®é€šç±»å‹çš„æ•°æ®ã€‚å¯ä»¥è¢«éå†ã€‚
## WeakMapä¸Mapçš„åŒºåˆ«

- Mapï¼Œæ˜¯é”®å€¼å¯¹çš„é›†åˆçš„ã€‚é”®å¯ä»¥ä»»æ„çš„æ•°æ®ç±»å‹ã€‚Mapå¯ä»¥è¢«éå†ã€‚
- WeakMapï¼Œåªæ¥æ”¶å¯¹è±¡ä½œä¸ºé”®ã€‚WeakMapä¸ä¼šé˜»æ­¢åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚WeakMapä¸èƒ½éå†

## ğŸ˜Š window.onloadå’ŒDOMContentLoadedçš„åŒºåˆ«

## ğŸ˜Š targetå’ŒcurrentTargetåŒºåˆ«

- event.targetï¼Œè¿”å›è§¦å‘äº‹ä»¶çš„å…ƒç´ ï¼Œå¯èƒ½ä¸æ˜¯ç»‘å®šäº‹ä»¶çš„å…ƒç´ 
- event.currentTargetï¼Œè¿”å›ç»‘å®šäº‹ä»¶çš„å…ƒç´ 
## ğŸ˜Š letï¼Œconstï¼Œvarçš„åŒºåˆ«

- `var`å˜é‡çš„ä½œç”¨åŸŸæ˜¯å®ƒå½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œ`var`ä¼šä½¿å˜é‡æå‡ï¼Œè¿™æ„å‘³ç€å˜é‡å¯ä»¥åœ¨å£°æ˜ä¹‹å‰ä½¿ç”¨ã€‚`var`ä¼šç›´æ¥åœ¨æ ˆå†…å­˜é¢„åˆ†é…å†…å­˜ç©ºé—´ï¼Œå®é™…ä»£ç æ‰§è¡Œçš„æ—¶å€™å†è¿›è¡Œå˜é‡å­˜å‚¨ï¼Œå¦‚æœä¼ å…¥çš„æ˜¯åº”å¼•ç”¨æ•°æ®ç±»å‹ï¼Œåˆ™ä¼šåœ¨å †å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªå†…å­˜ç©ºé—´å­˜å‚¨æ•°æ®ï¼Œæ ˆå†…å­˜å­˜å‚¨çš„æ˜¯æ•°æ®çš„å¼•ç”¨ï¼ŒæŒ‡å‘å †å†…å­˜åœ°å€ã€‚
- `let`å˜é‡çš„ä½œç”¨åŸŸæ˜¯å—çº§ä½œç”¨åŸŸï¼Œå­˜åœ¨æš‚å­˜æ€§æ­»åŒºï¼Œ`let`ä¸ä¼šä½¿å˜é‡æå‡ã€‚`let`åˆ™ä¸ä¼šé¢„åˆ†é…å†…å­˜ç©ºé—´ï¼Œè€Œä¸”åœ¨æ ˆå†…å­˜åˆ†é…å˜é‡æ—¶ï¼Œåšä¸€ä¸ªæ£€æŸ¥ï¼Œå¦‚æœå·²ç»æœ‰ç›¸åŒå˜é‡åå­˜åœ¨å°±ä¼šæŠ¥é”™ã€‚
- `const`å˜é‡çš„ä½œç”¨åŸŸæ˜¯å—çº§ä½œç”¨åŸŸï¼Œå­˜åœ¨æš‚å­˜æ€§æ­»åŒºï¼Œ`const`ä¸ä¼šä½¿å˜é‡æå‡ã€‚`const`ä¸`let`çš„å†…å®¹åˆ†é…ä¸€è‡´ã€‚

## ğŸ˜Š cookieï¼ŒlocalStorageï¼ŒsessionStorageåŒºåˆ«


## ğŸ˜Š å¤šä¸ªé¡µé¢ä¹‹é—´å¦‚ä½•è¿›è¡Œé€šä¿¡

## ğŸ˜Š bind, call, applyçš„åŒºåˆ«
